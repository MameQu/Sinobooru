var CharacterArray =
{
  "Alice": [
    "1/001.png",
    "1/009.png",
    "1/022.png",
    "1/029.png",
    "1/032.png",
    "1/044.png",
    "1/048.png",
    "1/056.png",
    "1/065.png",
    "1/077.png",
    "1/099.png",
    "1/100.png",
    "1/107.png",
    "1/109.png",
    "1/115.png",
    "1/135.png",
    "1/154.png",
    "1/173.png",
    "1/177.png",
    "1/181.png",
    "1/193.png",
    "1/196.png",
    "1/237.png",
    "1/254.png",
    "1/274.png",
    "1/289.png",
    "1/301.png",
    "1/308.png",
    "1/333.png",
    "1/380.png",
    "1/395.png",
    "1/410.png",
    "1/419.png",
    "1/426.png",
    "1/443.png",
    "1/456.png",
    "1/459.png",
    "1/470.png",
    "1/478.png",
    "1/481.png",
    "1/520.png",
    "1/539.png",
    "1/542.png",
    "1/557.png",
    "1/589.png",
    "1/595.png",
    "1/598.png",
    "1/641.png",
    "1/650.png",
    "1/676.png",
    "1/696.png",
    "1/725.png",
    "1/731.png",
    "1/762.png",
    "1/764.png",
    "1/789.png",
    "1/790.png",
    "1/818.png",
    "1/827.png",
    "1/841.png"
  ],
  "SnowWhite": [
    "1/002.png",
    "1/010.png",
    "1/017.png",
    "1/046.png",
    "1/059.png",
    "1/061.png",
    "1/064.png",
    "1/076.png",
    "1/082.png",
    "1/097.png",
    "1/111.png",
    "1/128.png",
    "1/132.png",
    "1/143.png",
    "1/148.png",
    "1/164.png",
    "1/179.png",
    "1/194.png",
    "1/195.png",
    "1/206.png",
    "1/227.png",
    "1/257.png",
    "1/282.png",
    "1/305.png",
    "1/323.png",
    "1/329.png",
    "1/335.png",
    "1/384.png",
    "1/402.png",
    "1/416.png",
    "1/436.png",
    "1/442.png",
    "1/452.png",
    "1/495.png",
    "1/500.png",
    "1/510.png",
    "1/517.png",
    "1/519.png",
    "1/533.png",
    "1/572.png",
    "1/577.png",
    "1/585.png",
    "1/593.png",
    "1/614.png",
    "1/628.png",
    "1/642.png",
    "1/643.png",
    "1/651.png",
    "1/663.png",
    "1/690.png",
    "1/697.png",
    "1/726.png",
    "1/738.png",
    "1/746.png",
    "1/775.png",
    "1/796.png",
    "1/807.png",
    "1/821.png",
    "1/835.png"
  ],
  "Akazukin": [
    "1/003.png",
    "1/011.png",
    "1/023.png",
    "1/031.png",
    "1/033.png",
    "1/052.png",
    "1/060.png",
    "1/066.png",
    "1/095.png",
    "1/103.png",
    "1/119.png",
    "1/134.png",
    "1/144.png",
    "1/198.png",
    "1/214.png",
    "1/228.png",
    "1/241.png",
    "1/277.png",
    "1/281.png",
    "1/299.png",
    "1/307.png",
    "1/315.png",
    "1/356.png",
    "1/359.png",
    "1/379.png",
    "1/404.png",
    "1/408.png",
    "1/434.png",
    "1/458.png",
    "1/463.png",
    "1/468.png",
    "1/518.png",
    "1/522.png",
    "1/529.png",
    "1/548.png",
    "1/575.png",
    "1/584.png",
    "1/600.png",
    "1/640.png",
    "1/649.png",
    "1/665.png",
    "1/683.png",
    "1/689.png",
    "1/695.png",
    "1/709.png",
    "1/732.png",
    "1/739.png",
    "1/758.png",
    "1/799.png",
    "1/808.png",
    "1/816.png",
    "1/839.png"
  ],
  "Cinderella": [
    "1/004.png",
    "1/012.png",
    "1/021.png",
    "1/035.png",
    "1/053.png",
    "1/067.png",
    "1/069.png",
    "1/089.png",
    "1/090.png",
    "1/118.png",
    "1/130.png",
    "1/139.png",
    "1/156.png",
    "1/185.png",
    "1/197.png",
    "1/215.png",
    "1/266.png",
    "1/279.png",
    "1/291.png",
    "1/312.png",
    "1/350.png",
    "1/373.png",
    "1/378.png",
    "1/418.png",
    "1/422.png",
    "1/454.png",
    "1/474.png",
    "1/483.png",
    "1/507.png",
    "1/512.png",
    "1/527.png",
    "1/552.png",
    "1/597.png",
    "1/601.png",
    "1/615.png",
    "1/618.png",
    "1/661.png",
    "1/691.png",
    "1/713.png",
    "1/736.png",
    "1/753.png",
    "1/791.png",
    "1/811.png",
    "1/823.png",
    "1/828.png",
    "1/838.png"
  ],
  "Pinocchio": [
    "1/005.png",
    "1/013.png",
    "1/020.png",
    "1/030.png",
    "1/051.png",
    "1/062.png",
    "1/083.png",
    "1/106.png",
    "1/113.png",
    "1/127.png",
    "1/145.png",
    "1/149.png",
    "1/166.png",
    "1/167.png",
    "1/205.png",
    "1/229.png",
    "1/234.png",
    "1/250.png",
    "1/287.png",
    "1/314.png",
    "1/347.png",
    "1/358.png",
    "1/385.png",
    "1/406.png",
    "1/417.png",
    "1/425.png",
    "1/435.png",
    "1/466.png",
    "1/469.png",
    "1/534.png",
    "1/558.png",
    "1/565.png",
    "1/583.png",
    "1/610.png",
    "1/647.png",
    "1/653.png",
    "1/659.png",
    "1/672.png",
    "1/692.png",
    "1/716.png",
    "1/734.png",
    "1/737.png",
    "1/766.png",
    "1/773.png",
    "1/792.png",
    "1/806.png",
    "1/814.png"
  ],
  "Ibarahime": [
    "1/006.png",
    "1/014.png",
    "1/018.png",
    "1/034.png",
    "1/047.png",
    "1/085.png",
    "1/088.png",
    "1/091.png",
    "1/104.png",
    "1/116.png",
    "1/150.png",
    "1/165.png",
    "1/175.png",
    "1/180.png",
    "1/188.png",
    "1/217.png",
    "1/255.png",
    "1/259.png",
    "1/303.png",
    "1/313.png",
    "1/336.png",
    "1/357.png",
    "1/381.png",
    "1/396.png",
    "1/424.png",
    "1/439.png",
    "1/450.png",
    "1/465.png",
    "1/486.png",
    "1/509.png",
    "1/511.png",
    "1/516.png",
    "1/530.png",
    "1/549.png",
    "1/559.png",
    "1/560.png",
    "1/599.png",
    "1/607.png",
    "1/609.png",
    "1/613.png",
    "1/644.png",
    "1/660.png",
    "1/684.png",
    "1/688.png",
    "1/706.png",
    "1/711.png",
    "1/727.png",
    "1/742.png",
    "1/757.png",
    "1/761.png",
    "1/784.png",
    "1/803.png",
    "1/820.png",
    "1/831.png"
  ],
  "Gretel": [
    "1/007.png",
    "1/015.png",
    "1/019.png",
    "1/042.png",
    "1/049.png",
    "1/055.png",
    "1/078.png",
    "1/093.png",
    "1/098.png",
    "1/108.png",
    "1/124.png",
    "1/133.png",
    "1/138.png",
    "1/151.png",
    "1/178.png",
    "1/218.png",
    "1/235.png",
    "1/268.png",
    "1/272.png",
    "1/278.png",
    "1/290.png",
    "1/324.png",
    "1/346.png",
    "1/374.png",
    "1/401.png",
    "1/412.png",
    "1/429.png",
    "1/453.png",
    "1/461.png",
    "1/477.png",
    "1/501.png",
    "1/521.png",
    "1/546.png",
    "1/553.png",
    "1/578.png",
    "1/582.png",
    "1/588.png",
    "1/629.png",
    "1/630.png",
    "1/648.png",
    "1/662.png",
    "1/670.png",
    "1/677.png",
    "1/701.png",
    "1/707.png",
    "1/712.png",
    "1/733.png",
    "1/747.png",
    "1/769.png",
    "1/793.png",
    "1/819.png",
    "1/829.png"
  ],
  "Kaguyahime": [
    "1/008.png",
    "1/016.png",
    "1/024.png",
    "1/028.png",
    "1/058.png",
    "1/079.png",
    "1/094.png",
    "1/122.png",
    "1/126.png",
    "1/131.png",
    "1/136.png",
    "1/140.png",
    "1/146.png",
    "1/172.png",
    "1/183.png",
    "1/221.png",
    "1/256.png",
    "1/275.png",
    "1/286.png",
    "1/300.png",
    "1/325.png",
    "1/355.png",
    "1/377.png",
    "1/407.png",
    "1/421.png",
    "1/427.png",
    "1/431.png",
    "1/438.png",
    "1/449.png",
    "1/496.png",
    "1/502.png",
    "1/528.png",
    "1/531.png",
    "1/576.png",
    "1/596.png",
    "1/631.png",
    "1/678.png",
    "1/702.png",
    "1/715.png",
    "1/735.png",
    "1/743.png",
    "1/752.png",
    "1/767.png",
    "1/782.png",
    "1/802.png",
    "1/815.png"
  ],
  "Mermaid": [
    "1/025.png",
    "1/026.png",
    "1/027.png",
    "1/050.png",
    "1/063.png",
    "1/080.png",
    "1/086.png",
    "1/092.png",
    "1/102.png",
    "1/105.png",
    "1/114.png",
    "1/129.png",
    "1/171.png",
    "1/182.png",
    "1/219.png",
    "1/224.png",
    "1/238.png",
    "1/252.png",
    "1/285.png",
    "1/298.png",
    "1/309.png",
    "1/316.png",
    "1/334.png",
    "1/383.png",
    "1/399.png",
    "1/415.png",
    "1/423.png",
    "1/448.png",
    "1/471.png",
    "1/504.png",
    "1/545.png",
    "1/566.png",
    "1/574.png",
    "1/587.png",
    "1/591.png",
    "1/645.png",
    "1/652.png",
    "1/666.png",
    "1/680.png",
    "1/687.png",
    "1/694.png",
    "1/708.png",
    "1/748.png",
    "1/765.png",
    "1/770.png",
    "1/800.png",
    "1/822.png",
    "1/830.png"
  ],
  "Dorothy": [
    "1/043.png",
    "1/045.png",
    "1/068.png",
    "1/081.png",
    "1/084.png",
    "1/101.png",
    "1/110.png",
    "1/123.png",
    "1/125.png",
    "1/141.png",
    "1/163.png",
    "1/174.png",
    "1/187.png",
    "1/213.png",
    "1/231.png",
    "1/232.png",
    "1/267.png",
    "1/310.png",
    "1/372.png",
    "1/397.png",
    "1/420.png",
    "1/430.png",
    "1/455.png",
    "1/472.png",
    "1/475.png",
    "1/479.png",
    "1/514.png",
    "1/592.png",
    "1/604.png",
    "1/608.png",
    "1/612.png",
    "1/632.png",
    "1/671.png",
    "1/693.png",
    "1/698.png",
    "1/741.png",
    "1/750.png",
    "1/774.png",
    "1/776.png",
    "1/795.png",
    "1/810.png",
    "1/833.png",
    "1/836.png"
  ],
  "Nutcracker": [
    "1/057.png",
    "1/112.png",
    "1/142.png",
    "1/155.png",
    "1/199.png",
    "1/236.png",
    "1/326.png",
    "1/405.png",
    "1/428.png",
    "1/487.png",
    "1/505.png",
    "1/547.png",
    "1/805.png",
    "1/843.png"
  ],
  "LittlePigs": [
    "1/075.png",
    "1/096.png",
    "1/121.png",
    "1/137.png",
    "1/204.png",
    "1/225.png",
    "1/261.png",
    "1/269.png",
    "1/280.png",
    "1/293.png",
    "1/327.png",
    "1/375.png",
    "1/382.png",
    "1/400.png",
    "1/432.png",
    "1/441.png",
    "1/460.png",
    "1/488.png",
    "1/515.png",
    "1/555.png",
    "1/586.png",
    "1/625.png",
    "1/633.png",
    "1/634.png",
    "1/667.png",
    "1/675.png",
    "1/703.png",
    "1/728.png",
    "1/730.png",
    "1/756.png",
    "1/768.png",
    "1/786.png",
    "1/787.png",
    "1/798.png",
    "1/825.png",
    "1/837.png"
  ],
  "Aladdin": [
    "1/120.png",
    "1/147.png",
    "1/170.png",
    "1/184.png",
    "1/220.png",
    "1/233.png",
    "1/251.png",
    "1/260.png",
    "1/284.png",
    "1/311.png",
    "1/349.png",
    "1/367.png",
    "1/411.png",
    "1/473.png",
    "1/476.png",
    "1/484.png",
    "1/498.png",
    "1/503.png",
    "1/525.png",
    "1/532.png",
    "1/540.png",
    "1/561.png",
    "1/590.png",
    "1/605.png",
    "1/611.png",
    "1/616.png",
    "1/617.png",
    "1/655.png",
    "1/657.png",
    "1/674.png",
    "1/679.png",
    "1/699.png",
    "1/718.png",
    "1/751.png",
    "1/778.png",
    "1/779.png",
    "1/785.png",
    "1/804.png",
    "1/834.png",
    "1/840.png"
  ],
  "Rapunzel": [
    "1/153.png",
    "1/216.png",
    "1/247.png",
    "1/258.png",
    "1/283.png",
    "1/288.png",
    "1/302.png",
    "1/322.png",
    "1/348.png",
    "1/386.png",
    "1/413.png",
    "1/414.png",
    "1/433.png",
    "1/451.png",
    "1/467.png",
    "1/485.png",
    "1/513.png",
    "1/543.png",
    "1/544.png",
    "1/554.png",
    "1/579.png",
    "1/602.png",
    "1/606.png",
    "1/626.png",
    "1/646.png",
    "1/656.png",
    "1/669.png",
    "1/686.png",
    "1/705.png",
    "1/710.png",
    "1/729.png",
    "1/755.png",
    "1/759.png",
    "1/781.png",
    "1/783.png",
    "1/788.png",
    "1/797.png",
    "1/809.png",
    "1/817.png"
  ],
  "Hameln": [
    "1/230.png",
    "1/273.png",
    "1/292.png",
    "1/328.png",
    "1/330.png",
    "1/345.png",
    "1/387.png",
    "1/409.png",
    "1/437.png",
    "1/462.png",
    "1/499.png",
    "1/523.png",
    "1/524.png",
    "1/541.png",
    "1/551.png",
    "1/556.png",
    "1/564.png",
    "1/580.png",
    "1/603.png",
    "1/627.png",
    "1/635.png",
    "1/664.png",
    "1/668.png",
    "1/700.png",
    "1/714.png",
    "1/740.png",
    "1/745.png",
    "1/760.png",
    "1/772.png",
    "1/780.png",
    "1/801.png",
    "1/813.png",
    "1/826.png",
    "1/832.png"
  ],
  "MatchGirl": [
    "1/360.png",
    "1/376.png",
    "1/398.png",
    "1/403.png",
    "1/440.png",
    "1/457.png",
    "1/480.png",
    "1/497.png",
    "1/526.png",
    "1/550.png",
    "1/573.png",
    "1/581.png",
    "1/594.png",
    "1/624.png",
    "1/636.png",
    "1/637.png",
    "1/654.png",
    "1/681.png",
    "1/685.png",
    "1/704.png",
    "1/717.png",
    "1/744.png",
    "1/749.png",
    "1/754.png",
    "1/763.png",
    "1/771.png",
    "1/777.png",
    "1/794.png",
    "1/812.png",
    "1/824.png",
    "1/842.png"
  ]
};
var a, b, src, i, stacc;

const sidebar = document.querySelector('.sidebar');
const toggleButton = document.getElementById('toggleButton');

toggleButton.addEventListener('click', () => {
  sidebar.classList.toggle('active');
  if ($("#toggleButton").text() === ">") {
    $("#toggleButton").text("-");
  } else {
    $("#toggleButton").text(">");
  }
});

for (let name in CharacterArray) {
  $(".box-content").append($("<div>").addClass("box").text(name));
  var images = CharacterArray[name].map(function(url) {
    var img = new Image();
    img.src = url;
    return img;
  });
}

const boxes = document.querySelectorAll('.box');

var container = $("<div>").addClass("display-content");
$(".contents").append(container);

boxes.forEach(box => {
  box.addEventListener('click', () => {
    a = box.textContent;
    $(".pb").remove();
    sidebar.classList.toggle('active');
    stacc = Math.floor(CharacterArray[a].length / 21) + (CharacterArray[a].length % 21 > 0 ? 1 : 0);
    for (i = 0; i < 21; i++) {
      var srcValue = CharacterArray[a][i] || "white.png";
      $(".image-resize").eq(i).attr("src", srcValue);
    }

    for (i = 1; i < stacc + 1; i++) {
      $("<span>").text(i).addClass("pb").appendTo(".span");
    };

    var pbutton = document.querySelectorAll('.pb');

    pbutton.forEach(pb => {
      pb.addEventListener('click', () => {
        b = pb.textContent;
        console.log(b);
        for (i = 0 + ((b - 1) * 21); i < 21 * b; i++) {
          $(".image-resize").eq(i - ((b - 1) * 21)).attr("src", CharacterArray[a][i] || "white.png");
        }
      });
    });
  });
});


for (i = 0; i < 21; i++) {
  var image = $("<img>").attr("src", "").addClass("image-resize").click(function() {
    imageResizeHandler();
  });
  container.append(image);
};

var imageResizeHandler = function() {
  $(".image-resize").click(function() {
    src = $(this).attr("src");
    if (!src.includes('white.png')) {
      i = 0;
      b = CharacterArray[a][CharacterArray[a].indexOf(src) + i];
      $(".image-display").attr("src", b);
      $(".floating-picture").fadeIn();
    }
  });

  $(".floating-picture").click(function() {
    $(".floating-picture").fadeOut();
  });
};

const boxListDiv = document.getElementById('box-content');


$(document).keydown(function(event) {
  if ($(".floating-picture").is(":visible")) {
    if (event.which === 37) {  // Left arrow key
      if (i > 0 - CharacterArray[a].indexOf(src)) {
        i--;
        console.log(i);
        b = CharacterArray[a][CharacterArray[a].indexOf(src) + i];
        $(".image-display").attr("src", b);
      }
    } else if (event.which === 39) {  // Right arrow key
      if (i < CharacterArray[a].length - 1) {
        i++;
        console.log(i);
        b = CharacterArray[a][CharacterArray[a].indexOf(src) + i];
        $(".image-display").attr("src", b);
      }
    }
  }
});